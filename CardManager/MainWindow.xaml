<Window x:Class="CardManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:CardManager"
        mc:Ignorable="d"
        Title="Card Manager" 
        Height="650" Width="1150"
        MinHeight="500" MinWidth="950"
        WindowStartupLocation="CenterScreen"
        Icon="Resources/application.ico">
    
    <Window.Background>
        <ImageBrush ImageSource="Resources/background.jpg" Stretch="UniformToFill"/>
    </Window.Background>
    
    <Window.Resources>
        <FontFamily x:Key="PixelFont">pack://application:,,,/Resources/#Press Start 2P</FontFamily>
    </Window.Resources>
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <Border Grid.Row="0" 
                Margin="0,0,0,16"
                Background="#CC2d2418"
                CornerRadius="6"
                Padding="16,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                           Text="Card Manager" 
                           FontFamily="pack://application:,,,/Resources/#Press Start 2P"
                           FontSize="18" 
                           Foreground="#e8d5b5"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Left"/>
                
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal" 
                            VerticalAlignment="Center">
                    <TextBlock Text="TOTAL VALUE:" 
                               FontFamily="pack://application:,,,/Resources/#Press Start 2P"
                               FontSize="10" 
                               Foreground="#a89878"
                               VerticalAlignment="Center"
                               Margin="0,0,12,0"/>
                    <Border Background="#44000000" 
                            CornerRadius="4" 
                            Padding="12,6">
                        <TextBlock x:Name="TotalPriceText"
                                   Text="$0.00" 
                                   FontFamily="pack://application:,,,/Resources/#Press Start 2P"
                                   FontSize="14" 
                                   Foreground="#7cfc00"
                                   VerticalAlignment="Center"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- Input Section -->
        <Border Grid.Row="1" 
                Background="#DD3d3028" 
                CornerRadius="6" 
                Padding="16"
                Margin="0,0,0,12"
                BorderBrush="#5a4a3a"
                BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="60"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="130"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Label Grid.Column="0" 
                       Content="Card ID:" 
                       VerticalAlignment="Center"
                       Foreground="#d4c4a8"
                       FontFamily="{StaticResource PixelFont}"
                       FontSize="10"
                       Margin="0,0,8,0"/>
                
                <TextBox x:Name="CardIdTextBox" 
                         Grid.Column="1"
                         Style="{DynamicResource ModernTextBox}"
                         VerticalAlignment="Center"
                         KeyDown="CardIdTextBox_KeyDown"/>
                
                <Label Grid.Column="2" 
                       Content="Qty:" 
                       VerticalAlignment="Center"
                       Foreground="#d4c4a8"
                       FontFamily="{StaticResource PixelFont}"
                       FontSize="10"
                       Margin="12,0,8,0"/>
                
                <TextBox x:Name="AmountTextBox" 
                         Grid.Column="3"
                         Style="{DynamicResource ModernTextBox}"
                         VerticalAlignment="Center"
                         Text="1"
                         KeyDown="CardIdTextBox_KeyDown"/>
                
                <Label Grid.Column="4" 
                       Content="Category:" 
                       VerticalAlignment="Center"
                       Foreground="#d4c4a8"
                       FontFamily="{StaticResource PixelFont}"
                       FontSize="10"
                       Margin="12,0,8,0"/>
                
                <ComboBox x:Name="CategoryComboBox" 
                          Grid.Column="5"
                          IsEditable="True"
                          VerticalAlignment="Center"
                          Height="38"/>
                
                <Button x:Name="AddCardButton" 
                        Grid.Column="6"
                        Content="Add Card"
                        Style="{DynamicResource PrimaryButton}"
                        FontFamily="{StaticResource PixelFont}"
                        FontSize="9"
                        Margin="12,0,0,0"
                        Click="AddCardButton_Click"/>
                
                <Button x:Name="DeleteSelectedButton" 
                        Grid.Column="8"
                        Content="Delete Selected"
                        Style="{DynamicResource SecondaryButton}"
                        FontFamily="{StaticResource PixelFont}"
                        FontSize="9"
                        Margin="0,0,8,0"
                        Click="DeleteSelectedButton_Click"/>
                
                <Button x:Name="RefreshAllButton" 
                        Grid.Column="9"
                        Content="Refresh All"
                        Style="{DynamicResource SecondaryButton}"
                        FontFamily="{StaticResource PixelFont}"
                        FontSize="9"
                        Click="RefreshAllButton_Click"/>
            </Grid>
        </Border>
        
        <!-- Search Section -->
        <Border Grid.Row="2" 
                Background="#DD3d3028" 
                CornerRadius="6" 
                Padding="16"
                Margin="0,0,0,12"
                BorderBrush="#5a4a3a"
                BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="250"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Label Grid.Column="0" 
                       Content="Search:" 
                       VerticalAlignment="Center"
                       Foreground="#d4c4a8"
                       FontFamily="{StaticResource PixelFont}"
                       FontSize="10"
                       Margin="0,0,8,0"/>
                
                <TextBox x:Name="SearchTextBox" 
                         Grid.Column="1"
                         Style="{DynamicResource ModernTextBox}"
                         VerticalAlignment="Center"
                         TextChanged="SearchTextBox_TextChanged"/>
                
                <Label Grid.Column="2" 
                       Content="Filter Category:" 
                       VerticalAlignment="Center"
                       Foreground="#d4c4a8"
                       FontFamily="{StaticResource PixelFont}"
                       FontSize="10"
                       Margin="16,0,8,0"/>
                
                <ComboBox x:Name="FilterCategoryComboBox" 
                          Grid.Column="3"
                          VerticalAlignment="Center"
                          Height="38"
                          SelectionChanged="FilterCategoryComboBox_SelectionChanged"/>
                
                <TextBlock Grid.Column="5"
                           x:Name="CardCountText"
                           Text="0 cards"
                           Foreground="#a89878"
                           VerticalAlignment="Center"
                           FontSize="13"
                           FontWeight="SemiBold"/>
            </Grid>
        </Border>
        
        <!-- DataGrid -->
        <Border Grid.Row="3" 
                Background="#EE2a2218" 
                CornerRadius="6"
                Padding="2"
                BorderBrush="#5a4a3a"
                BorderThickness="1">
            <DataGrid x:Name="CardsDataGrid"
                      CanUserSortColumns="True"
                      Sorting="CardsDataGrid_Sorting">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" 
                                        Binding="{Binding Id}" 
                                        Width="80"
                                        CanUserSort="True"
                                        SortMemberPath="Id">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Name" 
                                        Binding="{Binding Name}" 
                                        Width="*"
                                        MinWidth="180"
                                        CanUserSort="True"
                                        SortMemberPath="Name">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Category" 
                                        Binding="{Binding CategoryDisplay}" 
                                        Width="100"
                                        CanUserSort="True"
                                        SortMemberPath="Category">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Qty" 
                                        Binding="{Binding Amount}" 
                                        Width="50"
                                        CanUserSort="True"
                                        SortMemberPath="Amount">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                                <Setter Property="TextAlignment" Value="Center"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Market Price" 
                                        Binding="{Binding MarketPriceDisplay}" 
                                        Width="100"
                                        CanUserSort="True"
                                        SortMemberPath="MarketPrice">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Total" 
                                        Binding="{Binding TotalValueDisplay}" 
                                        Width="90"
                                        CanUserSort="True"
                                        SortMemberPath="TotalValue">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                                <Setter Property="FontWeight" Value="SemiBold"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Last Sale" 
                                        Binding="{Binding LatestSaleDisplay}" 
                                        Width="85"
                                        CanUserSort="True"
                                        SortMemberPath="LatestSalePrice">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Last Sale Date" 
                                        Binding="{Binding LatestSaleDateDisplay}" 
                                        Width="140"
                                        CanUserSort="True"
                                        SortMemberPath="LatestSaleDate">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                    <DataGridTextColumn Header="Updated" 
                                        Binding="{Binding LastUpdatedDisplay}" 
                                        Width="120"
                                        CanUserSort="True"
                                        SortMemberPath="LastUpdated">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="Padding" Value="8,0,12,0"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>
                </DataGrid.Columns>
                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="Edit Category" Click="EditCategoryMenuItem_Click"/>
                        <MenuItem Header="Clear Category" Click="ClearCategoryMenuItem_Click"/>
                        <Separator/>
                        <MenuItem Header="Edit Amount" Click="EditAmountMenuItem_Click"/>
                        <Separator/>
                        <MenuItem Header="Refresh Card" Click="RefreshCardMenuItem_Click"/>
                        <MenuItem Header="Open on TCGPlayer" Click="OpenTCGPlayerMenuItem_Click"/>
                        <Separator/>
                        <MenuItem Header="Delete Card" Click="DeleteCardMenuItem_Click"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>
            </DataGrid>
        </Border>
        
        <!-- Status Bar -->
        <Border Grid.Row="4" 
                Margin="0,12,0,0"
                Padding="10,6"
                Background="#CC2d2418"
                CornerRadius="4"
                BorderBrush="#5a4a3a"
                BorderThickness="1">
            <TextBlock x:Name="StatusText" 
                       Text="Ready"
                       Foreground="#a89878"
                       FontSize="12"/>
        </Border>
    </Grid>
</Window>
